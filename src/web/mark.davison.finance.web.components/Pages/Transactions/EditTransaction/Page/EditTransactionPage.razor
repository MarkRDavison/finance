@using mark.davison.finance.web.components.Pages.Transactions.EditTransaction.Common
@attribute [Route(Routes.TransactionNew)]
@inherits ComponentWithState
@inject IStateHelper _stateHelper
@inject IClientNavigationManager _navigation
@inject IFormSubmission<EditTransactionFormViewModel> _formSubmission

<MudGrid>
    <MudItem Class="py-4">
        <MudText Typo="Typo.h4">New @_lookupState.Instance.TransactionTypes.FirstOrDefault(_ => _.Id == Type)?.Type</MudText>
    </MudItem>

    <MudItem Class="d-flex align-center justify-left mud-width-full py-8">
        <EditForm EditContext="@_editContext" OnSubmit="@OnCreate">
            <EditTransactionForm FormViewModel="@FormViewModel" />
        </EditForm>
    </MudItem>

    <MudButton Disabled="@_primaryDisabled" Variant="Variant.Filled" OnClick="@OnCreate" Color="Color.Success">
        @if (_inProgress)
        {
            <MudProgressCircular Size="Size.Small" Color="Color.Success" Indeterminate="true" />
        }
        else
        {
            var t = "Create Transaction";
            @t
        }
    </MudButton>
</MudGrid>