@attribute [Route(Routes.AccountNew)]
@inherits FluxorComponent
@inject IStateHelper _stateHelper
@inject IClientNavigationManager _navigation
@inject IFormSubmission<EditAccountFormViewModel> _formSubmission

<MudPaper Class="pa-10">
    <MudGrid>
        <MudItem Class="py-4">
            <MudText Typo="Typo.h4">New @StartupState.Value.AccountTypes.FirstOrDefault(_ => _.Id == Type)?.Type account</MudText>
        </MudItem>
    
        <MudItem Class="d-flex align-center justify-left mud-width-full py-8">
            <EditForm EditContext="@_editContext" OnSubmit="@OnCreate">
                <EditAccountForm FormViewModel="@FormViewModel" />
            </EditForm>
        </MudItem>

        @*TODO: Progress button component*@
        <MudButton Disabled="@_primaryDisabled" Variant="Variant.Filled" OnClick="@OnCreate" Color="Color.Success">
            @if (_inProgress)
            {
                <MudProgressCircular Size="Size.Small" Color="Color.Success" Indeterminate="true" />
            }
            else
            {
                <span>Create account</span>
            }
        </MudButton>
    </MudGrid>
</MudPaper>