apiVersion: batch/v1
kind: Job
metadata:
  name: zeno-finance-e2e-job
  labels:
    app: zeno-finance-e2e
spec:
  backoffLimit: 0
  template:
    spec:
      restartPolicy: Never
      volumes:
      - name: cluster-nfs
        nfs:
          server: nfs.markdavison.kiwi
          path: /media/dell2tb/cluster/nfs/e2e/finance
      containers:
      - name: zeno-finance-e2e
        image: zeno15/zeno-finance-e2e:$E2E_IMAGE_TAG
        imagePullPolicy: Always
        env:
        - name: CYPRESS_WEB_URL
          value: 'https://finance-web-dev.markdavison.kiwi/'
        - name: CYPRESS_BFF_URL
          value: 'https://finance-bff-dev.markdavison.kiwi/'
        - name: CYPRESS_KC_USERNAME
          valueFrom:
            secretKeyRef:
              name: 'zeno-finance-dev-secret'
              key: KC_USERNAME
        - name: CYPRESS_KC_PASSWORD
          valueFrom:
            secretKeyRef:
              name: 'zeno-finance-dev-secret'
              key: KC_PASSWORD
        volumeMounts:
        - name: cluster-nfs
          mountPath: /mnt/cluster/finance-e2e
  